on:
  push:
    branches:
      - CollectTariff
name: Despliegue del Front
jobs:
  web-deploy:
    name: Desplegar a Somee.com
    runs-on: ubuntu-latest
    steps:
    - name: Obtener la ultima compilaci√≥n del repositorio
      uses: actions/checkout@v3
    
    - name : Debugging
      run : | 
        git branch  # Verifica la rama actual
        ls -la bin/Release/net8.0/publish/  # Verifica el contenido de la carpeta local

    - name : Instalar lftp
      run : sudo apt-get update && sudo apt-get install -y lftp

    - name : Limpiar directorio remoto
      run: |
        lftp -c "open -u cbl,Deploy.cbl.*** cbl.somee.com; rm -r www.cbl.somee.com/*"

    - name: Subir Archivos
      uses: SamKirkland/FTP-Deploy-Action@v4.3.4
      with:
        server: cbl.somee.com
        username: cbl
        password: ${{ secrets.FTP_PASSWORD }}
        protocol: ftp
        local-dir: bin/Release/net8.0/publish/
        server-dir: /www.cbl.somee.com/

